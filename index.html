<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Curry Recipe Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* í”„ë¦¬í…ë‹¤ë“œ í°íŠ¸ ì ìš© (ê¹”ë”í•œ ê³ ë”•) */
        @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css");
        
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #E5E5E5; /* PC ë°°ê²½ìƒ‰ (ì„¸ë ¨ëœ ê·¸ë ˆì´) */
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            color: #191F28;
        }

        /* ëª¨ë°”ì¼ ì•± í”„ë ˆì„ (PC ì¤‘ì•™ ì •ë ¬) */
        #app-container {
            max-width: 480px;
            min-height: 100vh;
            margin: 0 auto;
            background-color: #ffffff;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.1);
            overflow-x: hidden;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ ì²˜ë¦¬ */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* ì²´í¬ë°•ìŠ¤ ì»¤ìŠ¤í…€ ì• ë‹ˆë©”ì´ì…˜ */
        .check-ani {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* ì•ˆì „ ì˜ì—­ */
        .safe-pb {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>
<body>

    <div id="app-container" class="flex flex-col">
        
        <!-- 1. í—¤ë” ì´ë¯¸ì§€ ì˜ì—­ (íŒ¨ëŸ´ë™ìŠ¤ ëŠë‚Œ) -->
        <header class="relative h-[380px] flex-shrink-0 bg-gray-900">
            <img src="https://images.unsplash.com/photo-1565557623262-b51c2513a641?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" 
                 alt="Curry" 
                 class="w-full h-full object-cover opacity-90">
            
            <!-- ìƒë‹¨ ê·¸ë¼ë°ì´ì…˜ (í…ìŠ¤íŠ¸ ë³´í˜¸) -->
            <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/80"></div>

            <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="absolute top-0 left-0 w-full p-5 pt-12 flex justify-between items-center z-10">
                <button class="w-10 h-10 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center text-white active:scale-95 transition-transform">
                    <i data-lucide="chevron-left" class="w-6 h-6"></i>
                </button>
                <button class="w-10 h-10 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center text-white active:scale-95 transition-transform">
                    <i data-lucide="bookmark" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- íƒ€ì´í‹€ -->
            <div class="absolute bottom-0 left-0 w-full p-6 pb-10 text-white">
                <span class="inline-block px-2.5 py-1 rounded-md bg-[#F2994A] text-white text-[11px] font-bold tracking-wide mb-3 shadow-sm">GOLDEN RECIPE</span>
                <h1 class="text-[32px] font-bold leading-[1.2] mb-2">ê¹Šì€ í’ë¯¸ì˜<br>ì†Œê³ ê¸° ì¹´ë ˆ</h1>
                <div class="flex items-center gap-3 text-white/80 text-sm font-medium">
                    <span class="flex items-center gap-1"><i data-lucide="clock" class="w-4 h-4"></i> 40ë¶„</span>
                    <span class="w-px h-3 bg-white/30"></span>
                    <span>ë‚œì´ë„ ì¤‘</span>
                </div>
            </div>
        </header>

        <!-- 2. ì»¨í…ì¸  ì˜ì—­ (ë¼ìš´ë“œ ì‹œíŠ¸) -->
        <main class="relative -mt-6 bg-white rounded-t-[32px] flex-1 z-10 px-6 pt-8 pb-32 shadow-[0_-4px_20px_rgba(0,0,0,0.1)]">
            
            <!-- ì„¹ì…˜ í—¤ë” -->
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-xl font-bold text-[#191F28]">í•„ìš”í•œ ì¬ë£Œ</h2>
                    <p class="text-[13px] text-[#8B95A1] mt-1">4ì¸ë¶„ ê¸°ì¤€</p>
                </div>
                <button onclick="toggleAll()" class="text-sm font-semibold text-[#F2994A] active:text-[#d98235] transition-colors">
                    ì „ì²´ ì„ íƒ
                </button>
            </div>

            <!-- ì¬ë£Œ ë¦¬ìŠ¤íŠ¸ (ì‹¬í”Œ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼) -->
            <div id="ingredient-list" class="flex flex-col gap-4">
                <!-- JSë¡œ ë Œë”ë§ ë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì¶”ê°€ ì •ë³´ (ì—¬ë°± ì±„ì›€ìš©) -->
            <div class="mt-10 p-5 bg-gray-50 rounded-2xl border border-gray-100">
                <h3 class="font-bold text-sm text-gray-800 mb-2">ğŸ’¡ ì…°í”„ì˜ íŒ</h3>
                <p class="text-xs text-gray-500 leading-relaxed">
                    ì–‘íŒŒë¥¼ ê°ˆìƒ‰ì´ ë  ë•Œê¹Œì§€ ì¶©ë¶„íˆ ë³¶ì•„ì£¼ë©´(ì¹´ë¼ë©œë¼ì´ì§•) ì¹´ë ˆì˜ í’ë¯¸ê°€ í›¨ì”¬ ê¹Šì–´ì§‘ë‹ˆë‹¤. ì†Œê³ ê¸°ëŠ” í•ë¬¼ì„ ì œê±°í•˜ê³  ì‚¬ìš©í•˜ì„¸ìš”.
                </p>
            </div>
        </main>

        <!-- 3. í•˜ë‹¨ ê³ ì • ë²„íŠ¼ -->
        <div class="fixed bottom-0 w-full max-w-[480px] bg-white border-t border-gray-100 p-5 safe-pb z-50">
            <div class="flex items-center justify-between gap-4">
                <div class="flex flex-col">
                    <span class="text-xs text-gray-400 font-medium">ì´ ì˜ˆìƒ ê¸ˆì•¡</span>
                    <strong id="total-price" class="text-xl font-bold text-[#191F28]">0ì›</strong>
                </div>
                <button onclick="showToast('ì¿ íŒ¡ ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° ê¸°ëŠ¥ ì¤€ë¹„ì¤‘')" class="bg-[#191F28] text-white px-8 py-4 rounded-2xl font-bold text-base shadow-lg active:scale-[0.98] transition-transform flex-1 flex justify-center items-center gap-2">
                    <span>ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</span>
                </button>
            </div>
        </div>
        
        <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
        <div id="toast" class="absolute top-[100px] left-1/2 -translate-x-1/2 bg-[#191F28]/90 backdrop-blur-sm text-white text-sm px-5 py-2.5 rounded-full opacity-0 transition-opacity duration-300 pointer-events-none z-[60] whitespace-nowrap shadow-xl">
            ì•Œë¦¼ ë©”ì‹œì§€
        </div>

    </div>

    <script>
        // ë°ì´í„° ì„¤ì • (ìš”ì²­í•˜ì‹  ë§í¬ ë°˜ì˜)
        // ì¸ë„¤ì¼ ì´ë¯¸ì§€ëŠ” ë””ìì¸ ì»¨ì…‰ìƒ ì œê±°í•˜ê³  í…ìŠ¤íŠ¸ ìœ„ì£¼ë¡œ ê°‘ë‹ˆë‹¤.
        const ingredients = [
            { 
                id: 1, 
                name: "ì–‘íŒŒ", 
                sub: "í•„ìˆ˜ ì¬ë£Œ", 
                price: 8900, 
                link: "https://link.coupang.com/a/c5CXMg"
            },
            { 
                id: 2, 
                name: "ë‹¹ê·¼", 
                sub: "ì„¸ì²™ ë‹¹ê·¼ 1kg", 
                price: 5500, 
                link: "https://link.coupang.com/a/c5CYAb"
            },
            { 
                id: 3, 
                name: "ì†Œê³ ê¸°", 
                sub: "ì¹´ë ˆ/êµ­ê±°ë¦¬ìš©", 
                price: 18900, 
                link: "https://link.coupang.com/a/c5CZbA"
            },
            { 
                id: 4, 
                name: "ê³ í˜• ì¹´ë ˆ", 
                sub: "ê¹Šì€ ë§› (ë§¤ìš´ë§›)", 
                price: 3200, 
                link: "https://link.coupang.com/a/c5CZJz"
            }
        ];

        // ìƒíƒœ ê´€ë¦¬
        let cart = new Set();
        const STORAGE_KEY = 'curry_cart_v1';

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¡œë“œ
        function loadCart() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    const parsed = JSON.parse(saved);
                    ingredients.forEach(i => {
                        if(parsed.includes(i.id)) cart.add(i.id);
                    });
                } else {
                    // ê¸°ë³¸ì ìœ¼ë¡œ ì „ì²´ ì„ íƒ ë˜ì–´ìˆë„ë¡ ìœ ë„ (ì„ íƒì‚¬í•­)
                    // ingredients.forEach(i => cart.add(i.id));
                }
            } catch(e) {
                console.error(e);
            }
        }

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥
        function saveCart() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify([...cart]));
        }

        // ë Œë”ë§
        function render() {
            const listEl = document.getElementById('ingredient-list');
            const totalEl = document.getElementById('total-price');
            
            listEl.innerHTML = '';
            let total = 0;

            ingredients.forEach(item => {
                const isChecked = cart.has(item.id);
                if(isChecked) total += item.price;

                // ëª¨ë˜í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸ UI
                const div = document.createElement('div');
                div.className = "flex items-center justify-between group cursor-pointer select-none";
                div.onclick = (e) => {
                    // ë§í¬ í´ë¦­ ì‹œ ì²´í¬ë°•ìŠ¤ í† ê¸€ ë°©ì§€
                    if(e.target.closest('a')) return;
                    toggleItem(item.id);
                };

                div.innerHTML = `
                    <div class="flex items-center gap-4 flex-1">
                        <!-- ì»¤ìŠ¤í…€ ì²´í¬ë°•ìŠ¤ -->
                        <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center check-ani ${isChecked ? 'bg-[#F2994A] border-[#F2994A]' : 'border-gray-300 bg-white'}">
                            <i data-lucide="check" class="w-3.5 h-3.5 text-white ${isChecked ? 'opacity-100' : 'opacity-0'}"></i>
                        </div>
                        
                        <!-- í…ìŠ¤íŠ¸ ì •ë³´ -->
                        <div class="flex flex-col">
                            <span class="text-[16px] font-medium ${isChecked ? 'text-[#191F28]' : 'text-gray-500'} transition-colors">${item.name}</span>
                            <span class="text-[12px] text-gray-400">${item.sub}</span>
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <span class="text-[14px] font-semibold text-[#191F28]">${item.price.toLocaleString()}ì›</span>
                        <!-- ê°œë³„ ë§í¬ ë²„íŠ¼ (ì‘ê³  ì„¸ë ¨ë˜ê²Œ) -->
                        <a href="${item.link}" target="_blank" class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 transition-colors">
                            <i data-lucide="external-link" class="w-4 h-4"></i>
                        </a>
                    </div>
                `;
                listEl.appendChild(div);
            });

            // ì´ì•¡ ì• ë‹ˆë©”ì´ì…˜
            totalEl.innerText = total.toLocaleString() + "ì›";
            
            lucide.createIcons();
        }

        // ì•¡ì…˜ í•¨ìˆ˜ë“¤
        function toggleItem(id) {
            if(cart.has(id)) cart.delete(id);
            else cart.add(id);
            saveCart();
            render();
        }

        function toggleAll() {
            if(cart.size === ingredients.length) {
                cart.clear();
                showToast("ì „ì²´ ì„ íƒ í•´ì œ");
            } else {
                ingredients.forEach(i => cart.add(i.id));
                showToast("ëª¨ë“  ì¬ë£Œ ì„ íƒ ì™„ë£Œ");
            }
            saveCart();
            render();
        }

        let toastTimer;
        window.showToast = function(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.style.opacity = '1';
            
            if(toastTimer) clearTimeout(toastTimer);
            toastTimer = setTimeout(() => {
                toast.style.opacity = '0';
            }, 2000);
        }

        // ì´ˆê¸° ì‹¤í–‰
        loadCart();
        render();
        lucide.createIcons();

    </script>
</body>
</html>
