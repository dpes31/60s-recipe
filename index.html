<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>카레 레시피</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel (JSX 변환용) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Pretendard', sans-serif; 
            background-color: #f9fafb;
            /* 모바일 스크롤 부드럽게 및 주소창 숨김 최적화 */
            -webkit-overflow-scrolling: touch;
            overflow-x: hidden; /* 가로 스크롤 방지 */
        }
        
        /* 스크롤바 숨기기 */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes fadeInUp {
          from { opacity: 0; transform: translate(-50%, -40%); }
          to { opacity: 1; transform: translate(-50%, -50%); }
        }
        .animate-fade-in-up {
          animation: fadeInUp 0.3s ease-out forwards;
        }

        /* 유튜브 쇼츠 비율 유지 (9:16) */
        .iframe-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 177.77%; /* 16:9의 역수 (9:16 비율) */
            background: #000;
        }
        .iframe-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>

    <div id="root" class="w-full flex justify-center min-h-screen"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 아이콘 컴포넌트 ---
        const Icon = ({ d, size = 24, className = "", fill = "none", strokeWidth = 2, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {d}
            </svg>
        );

        // 단일 경로 아이콘
        const ChevronLeft = (props) => <Icon {...props} d={<path d="M15 18l-6-6 6-6" />} />;
        const Heart = ({ fill = "none", ...props }) => <Icon {...props} fill={fill} d={<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />} />;
        const Check = (props) => <Icon {...props} d={<polyline points="20 6 9 17 4 12" />} />;
        const Edit2 = (props) => <Icon {...props} d={<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />} />;

        // 복합 경로 아이콘 (반드시 <g> 태그로 감싸야 함)
        const Share2 = (props) => <Icon {...props} d={<g><circle cx="18" cy="5" r="3" /><circle cx="6" cy="12" r="3" /><circle cx="18" cy="19" r="3" /><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" /><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" /></g>} />;
        const ExternalLink = (props) => <Icon {...props} d={<g><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" /><polyline points="15 3 21 3 21 9" /><line x1="10" y1="14" x2="21" y2="3" /></g>} />;
        const ShoppingCart = (props) => <Icon {...props} d={<g><circle cx="9" cy="21" r="1" /><circle cx="20" cy="21" r="1" /><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" /></g>} />;
        const Info = (props) => <Icon {...props} d={<g><circle cx="12" cy="12" r="10" /><line x1="12" y1="16" x2="12" y2="12" /><line x1="12" y1="8" x2="12.01" y2="8" /></g>} />;
        
        // [수정됨] 아래 아이콘들에 <g> 태그 추가하여 JSX 에러 해결
        const Trash2 = (props) => <Icon {...props} d={<g><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></g>} />;
        const Plus = (props) => <Icon {...props} d={<g><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></g>} />;
        const X = (props) => <Icon {...props} d={<g><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></g>} />;
        const Save = (props) => <Icon {...props} d={<g><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" /><polyline points="17 21 17 13 7 13 7 21" /><polyline points="7 3 7 8 15 8" /></g>} />;


        // --- 메인 앱 컴포넌트 ---
        const App = () => {
            // 기본 데이터
            const initialData = {
                title: "실패 없는 깊은 맛, 소고기 카레",
                description: "물을 넣지 않고 양파의 채수와 우유로만 끓여낸 진한 풍미의 프리미엄 카레 레시피입니다.",
                cookTime: "30분",
                serving: "2인분",
                difficulty: "보통",
                // 유튜브 쇼츠 ID
                videoId: "Q0KJjfpk6YM", 
                ingredients: [
                    { id: 1, name: "햇 양파 (3kg)", price: 8900, link: "https://link.coupang.com/a/c5CXMg", image: "https://images.unsplash.com/photo-1508747703725-719777637519?auto=format&fit=crop&w=150&q=80" },
                    { id: 2, name: "세척 당근 (1kg)", price: 4500, link: "https://link.coupang.com/a/c5CYAb", image: "https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?auto=format&fit=crop&w=150&q=80" },
                    { id: 3, name: "소고기 국거리용 (300g)", price: 15900, link: "https://link.coupang.com/a/c5CZbA", image: "https://images.unsplash.com/photo-1603048297172-c92544798d5e?auto=format&fit=crop&w=150&q=80" },
                    { id: 4, name: "고형 카레 (매운맛)", price: 3200, link: "https://link.coupang.com/a/c5CZJz", image: "https://images.unsplash.com/photo-1531287383269-d22ca1c8c605?auto=format&fit=crop&w=150&q=80" }
                ]
            };

            // State
            const [recipe, setRecipe] = useState(initialData);
            const [isEditing, setIsEditing] = useState(false);
            const [selectedItems, setSelectedItems] = useState([]);
            const [isLiked, setIsLiked] = useState(false);
            const [toast, setToast] = useState(null);
            const [showBuyModal, setShowBuyModal] = useState(false); // 구매 모달 상태

            // LocalStorage 로드 (데이터 병합 로직 포함)
            useEffect(() => {
                const saved = localStorage.getItem('myRecipeApp_v2'); // 버전 변경 (충돌 방지)
                if (saved) {
                    try {
                        const parsed = JSON.parse(saved);
                        // 기존 데이터에 없는 필드(예: videoId)가 있으면 기본값으로 채워줌
                        setRecipe({ ...initialData, ...parsed });
                    } catch (e) {
                        console.error("Load failed", e);
                    }
                }
            }, []);

            // LocalStorage 저장
            useEffect(() => {
                localStorage.setItem('myRecipeApp_v2', JSON.stringify(recipe));
            }, [recipe]);

            // 초기 진입 시 모든 재료 선택
            useEffect(() => {
                if (!isEditing) { // 수정 중이 아닐 때만 리셋
                   // 기존 선택 상태 유지하되, 없는 재료는 제외
                   const currentIds = recipe.ingredients.map(i => i.id);
                   setSelectedItems(prev => {
                       if(prev.length === 0) return currentIds;
                       return prev.filter(id => currentIds.includes(id));
                   });
                }
            }, [recipe.ingredients.length]);

            // --- 핸들러 함수들 ---

            const toggleItem = (id) => {
                if (selectedItems.includes(id)) {
                    setSelectedItems(selectedItems.filter(itemId => itemId !== id));
                } else {
                    setSelectedItems([...selectedItems, id]);
                }
            };

            const toggleAll = () => {
                if (selectedItems.length === recipe.ingredients.length) {
                    setSelectedItems([]);
                } else {
                    setSelectedItems(recipe.ingredients.map(i => i.id));
                }
            };

            const totalPrice = recipe.ingredients
                .filter(item => selectedItems.includes(item.id))
                .reduce((sum, item) => sum + parseInt(item.price || 0), 0);

            const handleBuyClick = () => {
                if (selectedItems.length === 0) {
                    showToast("선택된 재료가 없습니다.");
                    return;
                }
                setShowBuyModal(true); // 모달 열기
            };

            const showToast = (msg) => {
                setToast(msg);
                setTimeout(() => setToast(null), 3000);
            };

            // --- 편집 관련 핸들러 ---
            const handleTextChange = (key, value) => {
                setRecipe(prev => ({ ...prev, [key]: value }));
            };

            const handleIngredientChange = (id, field, value) => {
                setRecipe(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.map(item => 
                        item.id === id ? { ...item, [field]: value } : item
                    )
                }));
            };

            const addIngredient = () => {
                const newId = Date.now();
                setRecipe(prev => ({
                    ...prev,
                    ingredients: [...prev.ingredients, {
                        id: newId,
                        name: "새 재료",
                        price: 0,
                        link: "",
                        image: "https://via.placeholder.com/150"
                    }]
                }));
                setSelectedItems(prev => [...prev, newId]); // 새 재료 자동 선택
            };

            const removeIngredient = (id) => {
                if (!confirm("이 재료를 삭제하시겠습니까?")) return;
                setRecipe(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.filter(item => item.id !== id)
                }));
                setSelectedItems(prev => prev.filter(itemId => itemId !== id));
            };

            return (
                <div className="w-full max-w-md bg-white md:my-4 md:rounded-[2rem] shadow-2xl relative min-h-[100vh] md:min-h-[850px] flex flex-col mx-auto">
                    
                    {/* --- 상단 헤더 --- */}
                    <header className="absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center text-white bg-gradient-to-b from-black/60 to-transparent pointer-events-none">
                        {/* 왼쪽 버튼 그룹 (pointer-events-auto로 클릭 가능하게) */}
                        <div className="pointer-events-auto">
                            <button className="p-2 rounded-full bg-white/20 backdrop-blur-md hover:bg-white/30 transition">
                                <ChevronLeft size={24} />
                            </button>
                        </div>

                        {/* 오른쪽 버튼 그룹 */}
                        <div className="flex gap-3 pointer-events-auto">
                            {/* 수정 버튼 */}
                            <button 
                                onClick={() => setIsEditing(!isEditing)}
                                className={`p-2 rounded-full backdrop-blur-md transition ${isEditing ? 'bg-amber-500 text-white' : 'bg-white/20 text-white hover:bg-white/30'}`}
                            >
                                {isEditing ? <Save size={24} /> : <Edit2 size={24} />}
                            </button>

                            <button 
                                onClick={() => setIsLiked(!isLiked)}
                                className={`p-2 rounded-full backdrop-blur-md transition ${isLiked ? 'bg-red-500 text-white' : 'bg-white/20 text-white hover:bg-white/30'}`}
                            >
                                <Heart size={24} fill={isLiked ? "currentColor" : "none"} />
                            </button>
                        </div>
                    </header>

                    {/* --- 비디오 영역 (YouTube Shorts) --- */}
                    <div className="relative bg-gray-900 shrink-0 w-full overflow-hidden">
                        <div className="iframe-wrapper">
                            <iframe 
                                src={`https://www.youtube.com/embed/${recipe.videoId || "Q0KJjfpk6YM"}?autoplay=1&loop=1&playlist=${recipe.videoId || "Q0KJjfpk6YM"}&controls=0&rel=0&playsinline=1&modestbranding=1&iv_load_policy=3`}
                                title="YouTube video player" 
                                frameBorder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                allowFullScreen
                            ></iframe>
                        </div>
                        {/* 하단 그라데이션 */}
                        <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black/70 to-transparent pointer-events-none"></div>
                    </div>

                    {/* --- 컨텐츠 시트 --- */}
                    <div className="flex-1 bg-white relative -mt-6 rounded-t-[2rem] z-10 flex flex-col pb-32 shadow-[0_-4px_20px_rgba(0,0,0,0.1)]">
                        {/* 핸들바 */}
                        <div className="w-full flex justify-center pt-3 pb-1">
                            <div className="w-12 h-1.5 bg-gray-200 rounded-full"></div>
                        </div>

                        <div className="px-6 pt-4 pb-8">
                            {/* 타이틀 및 설명 편집 */}
                            <div className="mb-8">
                                <span className="inline-block px-3 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded-full mb-2">BEST 레시피</span>
                                
                                {isEditing ? (
                                    <div className="space-y-3 animate-fade-in-up">
                                        <label className="block text-xs font-bold text-gray-500">레시피 제목</label>
                                        <input 
                                            type="text" 
                                            value={recipe.title}
                                            onChange={(e) => handleTextChange('title', e.target.value)}
                                            className="w-full border border-amber-300 rounded-lg p-2 text-lg font-bold focus:ring-2 focus:ring-amber-500 outline-none"
                                        />
                                        <label className="block text-xs font-bold text-gray-500">설명</label>
                                        <textarea 
                                            value={recipe.description}
                                            onChange={(e) => handleTextChange('description', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-2 focus:ring-amber-500 outline-none h-20"
                                        />
                                         <label className="block text-xs font-bold text-gray-500">영상 ID (유튜브 영상 주소의 뒷부분)</label>
                                        <input 
                                            type="text" 
                                            value={recipe.videoId || ""}
                                            onChange={(e) => handleTextChange('videoId', e.target.value)}
                                            placeholder="예: Q0KJjfpk6YM"
                                            className="w-full border border-gray-300 rounded-lg p-2 text-sm font-mono text-gray-600 focus:ring-2 focus:ring-amber-500 outline-none"
                                        />

                                        <div className="grid grid-cols-3 gap-2">
                                            <div>
                                                <label className="block text-xs text-gray-400 mb-1">시간</label>
                                                <input type="text" value={recipe.cookTime} onChange={(e) => handleTextChange('cookTime', e.target.value)} className="w-full border rounded p-1 text-sm" />
                                            </div>
                                            <div>
                                                <label className="block text-xs text-gray-400 mb-1">난이도</label>
                                                <input type="text" value={recipe.difficulty} onChange={(e) => handleTextChange('difficulty', e.target.value)} className="w-full border rounded p-1 text-sm" />
                                            </div>
                                            <div>
                                                <label className="block text-xs text-gray-400 mb-1">인분</label>
                                                <input type="text" value={recipe.serving} onChange={(e) => handleTextChange('serving', e.target.value)} className="w-full border rounded p-1 text-sm" />
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <>
                                        <h1 className="text-2xl font-bold text-gray-900 mb-2 leading-tight">{recipe.title}</h1>
                                        <p className="text-gray-500 text-sm leading-relaxed mb-4">{recipe.description}</p>
                                        
                                        <div className="flex items-center gap-4 text-sm text-gray-500 border-b border-gray-100 pb-6">
                                            <div className="flex items-center gap-1.5">
                                                <div className="w-2 h-2 rounded-full bg-amber-500"></div>{recipe.cookTime}
                                            </div>
                                            <div className="flex items-center gap-1.5">
                                                <div className="w-2 h-2 rounded-full bg-amber-500"></div>{recipe.difficulty}
                                            </div>
                                            <div className="flex items-center gap-1.5">
                                                <div className="w-2 h-2 rounded-full bg-amber-500"></div>{recipe.serving}
                                            </div>
                                        </div>
                                    </>
                                )}
                            </div>

                            {/* 재료 섹션 헤더 */}
                            <div className="flex justify-between items-end mb-4">
                                <h2 className="text-lg font-bold flex items-center gap-2">
                                    필요한 재료
                                    <span className="text-amber-500 text-sm font-normal bg-amber-50 px-2 py-0.5 rounded-md">{recipe.ingredients.length}개</span>
                                </h2>
                                {isEditing ? (
                                    <button onClick={addIngredient} className="text-xs bg-amber-100 text-amber-700 px-3 py-1.5 rounded-full font-bold flex items-center gap-1 hover:bg-amber-200">
                                        <Plus size={14} /> 재료 추가
                                    </button>
                                ) : (
                                    <button onClick={toggleAll} className="text-sm text-gray-400 hover:text-gray-600 underline underline-offset-4">
                                        {selectedItems.length === recipe.ingredients.length ? '전체 해제' : '전체 선택'}
                                    </button>
                                )}
                            </div>

                            {/* 재료 리스트 */}
                            <div className="space-y-3">
                                {recipe.ingredients.map((item) => {
                                    const isSelected = selectedItems.includes(item.id);
                                    return (
                                        <div key={item.id} className={`relative group flex flex-col md:flex-row md:items-center gap-3 p-3 rounded-2xl border transition-all duration-200 ${isSelected && !isEditing ? 'border-amber-400 bg-amber-50/30' : 'border-gray-100 bg-white'}`}>
                                            
                                            <div className="flex items-center gap-3 w-full">
                                                {/* 체크박스 (수정모드 아닐때만) */}
                                                {!isEditing && (
                                                    <button 
                                                        onClick={() => toggleItem(item.id)}
                                                        className={`shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${isSelected ? 'border-amber-500 bg-amber-500' : 'border-gray-300 bg-white'}`}
                                                    >
                                                        {isSelected && <Check size={14} className="text-white" strokeWidth={3} />}
                                                    </button>
                                                )}

                                                {/* 썸네일 이미지 */}
                                                <div className="shrink-0 w-14 h-14 rounded-xl overflow-hidden bg-gray-100 relative border border-gray-200">
                                                    <img src={item.image || "https://via.placeholder.com/150"} alt={item.name} className="w-full h-full object-cover" onError={(e) => e.target.src='https://via.placeholder.com/60?text=No+Img'} />
                                                </div>

                                                {/* 재료 정보 (뷰 모드 vs 에디트 모드) */}
                                                <div className="flex-1 min-w-0">
                                                    {isEditing ? (
                                                        <div className="space-y-2">
                                                            <input 
                                                                type="text" 
                                                                placeholder="재료명" 
                                                                value={item.name} 
                                                                onChange={(e) => handleIngredientChange(item.id, 'name', e.target.value)}
                                                                className="w-full border border-gray-300 rounded px-2 py-1 text-sm"
                                                            />
                                                            <div className="flex gap-2">
                                                                <input 
                                                                    type="number" 
                                                                    placeholder="가격" 
                                                                    value={item.price} 
                                                                    onChange={(e) => handleIngredientChange(item.id, 'price', parseInt(e.target.value) || 0)}
                                                                    className="w-24 border border-gray-300 rounded px-2 py-1 text-sm"
                                                                />
                                                                <span className="text-sm flex items-center">원</span>
                                                            </div>
                                                            <input 
                                                                type="text" 
                                                                placeholder="상품 링크 (https://...)" 
                                                                value={item.link} 
                                                                onChange={(e) => handleIngredientChange(item.id, 'link', e.target.value)}
                                                                className="w-full border border-gray-300 rounded px-2 py-1 text-xs text-blue-500"
                                                            />
                                                            <input 
                                                                type="text" 
                                                                placeholder="이미지 주소 (우클릭 > 이미지 주소 복사)" 
                                                                value={item.image} 
                                                                onChange={(e) => handleIngredientChange(item.id, 'image', e.target.value)}
                                                                className="w-full border border-gray-300 rounded px-2 py-1 text-xs text-gray-500"
                                                            />
                                                        </div>
                                                    ) : (
                                                        <>
                                                            <h3 className={`font-medium truncate ${isSelected ? 'text-gray-900' : 'text-gray-600'}`}>{item.name}</h3>
                                                            <div className="flex items-center gap-2 mt-0.5">
                                                                <span className="text-sm font-bold text-gray-900">{item.price.toLocaleString()}원</span>
                                                            </div>
                                                        </>
                                                    )}
                                                </div>

                                                {/* 개별 링크/삭제 버튼 */}
                                                <div className="shrink-0 flex flex-col gap-2">
                                                    {isEditing ? (
                                                        <button onClick={() => removeIngredient(item.id)} className="p-2 text-red-400 hover:bg-red-50 rounded-full">
                                                            <Trash2 size={18} />
                                                        </button>
                                                    ) : (
                                                        <a href={item.link} target="_blank" rel="noreferrer" className="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition">
                                                            <ExternalLink size={18} />
                                                        </a>
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                            <div className="h-8"></div>
                        </div>
                    </div>

                    {/* --- 하단 플로팅 구매 바 (수정모드 아닐때만) --- */}
                    {!isEditing && (
                        <div className="fixed md:absolute bottom-0 left-0 right-0 bg-white border-t border-gray-100 p-4 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] z-30 max-w-md mx-auto">
                            <div className="flex items-center justify-between mb-3">
                                <span className="text-sm text-gray-500">총 <strong className="text-amber-600">{selectedItems.length}</strong>개 선택됨</span>
                                <div className="text-lg font-bold text-gray-900">{totalPrice.toLocaleString()}원</div>
                            </div>
                            <button onClick={handleBuyClick} className="w-full bg-gray-900 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-2 hover:bg-gray-800 active:scale-[0.98] transition-all shadow-lg shadow-gray-200">
                                <ShoppingCart size={20} />
                                <span>재료 한 번에 담기</span>
                            </button>
                        </div>
                    )}

                    {/* --- 구매 모달 (팝업 차단 이슈 해결용) --- */}
                    {showBuyModal && (
                        <div className="absolute inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in-up p-4 md:p-0">
                            <div className="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl mb-4 md:mb-0">
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-bold">선택한 재료 구매하기</h3>
                                    <button onClick={() => setShowBuyModal(false)} className="p-1 hover:bg-gray-100 rounded-full"><X size={24} /></button>
                                </div>
                                <p className="text-gray-500 text-sm mb-4">
                                    브라우저 보안상 한 번에 여러 창을 띄울 수 없어,<br/>아래 목록에서 순서대로 클릭해주세요.
                                </p>
                                
                                <div className="space-y-2 max-h-[50vh] overflow-y-auto no-scrollbar">
                                    {recipe.ingredients.filter(item => selectedItems.includes(item.id)).map((item, idx) => (
                                        <a 
                                            key={item.id}
                                            href={item.link}
                                            target="_blank"
                                            rel="noreferrer"
                                            className="flex items-center justify-between p-3 rounded-xl bg-gray-50 border border-gray-100 hover:bg-amber-50 hover:border-amber-200 transition group"
                                            onClick={(e) => {
                                                // 클릭 시 시각적 피드백
                                                e.currentTarget.classList.add('opacity-50');
                                            }}
                                        >
                                            <div className="flex items-center gap-3">
                                                <span className="w-6 h-6 rounded-full bg-gray-900 text-white text-xs flex items-center justify-center font-bold group-hover:bg-amber-500">
                                                    {idx + 1}
                                                </span>
                                                <span className="text-sm font-medium truncate max-w-[180px]">{item.name}</span>
                                            </div>
                                            <ExternalLink size={16} className="text-gray-400 group-hover:text-amber-600" />
                                        </a>
                                    ))}
                                </div>

                                <button onClick={() => setShowBuyModal(false)} className="w-full mt-4 py-3 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200">
                                    닫기
                                </button>
                            </div>
                        </div>
                    )}

                    {/* 토스트 메시지 */}
                    {toast && (
                        <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-900/90 text-white px-6 py-3 rounded-full text-sm backdrop-blur-sm animate-fade-in-up z-50 whitespace-nowrap shadow-xl flex items-center gap-2 pointer-events-none">
                            <Info size={16} className="text-amber-400" />
                            {toast}
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
