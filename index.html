<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>카레 레시피</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Pretendard', sans-serif; 
            background-color: #f9fafb;
            -webkit-overflow-scrolling: touch;
            overflow-x: hidden;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes fadeInUp {
          from { opacity: 0; transform: translate3d(0, 20px, 0); }
          to { opacity: 1; transform: translate3d(0, 0, 0); }
        }
        .animate-fade-in-up {
          animation: fadeInUp 0.3s ease-out forwards;
        }

        /* 유튜브 비율 관련 */
        .iframe-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            background: #000;
        }
        .iframe-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 모달 중앙 정렬 강제 스타일 */
        .fixed-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999 !important;
            padding: 1.5rem;
        }
    </style>
</head>
<body>

    <div id="root" class="w-full flex justify-center min-h-screen"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 안정적인 아이콘 컴포넌트 ---
        const ChevronLeft = ({ size=24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
        );
        const Heart = ({ size=24, fill="none", className="" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        );
        const Check = ({ size=24, className="" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>
        );
        const ExternalLink = ({ size=24, className="" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
        );
        const ShoppingCart = ({ size=24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        );
        const Info = ({ size=24, className="" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
        );
        const Trash2 = ({ size=24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
        );
        const Plus = ({ size=24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        );
        const X = ({ size=24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        );
        const Edit2 = ({ size=24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
        );
        const Settings = ({ size=24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        );

        const App = () => {
            const initialData = {
                title: "실패 없는 깊은 맛, 소고기 카레",
                description: "물을 넣지 않고 양파의 채수와 우유로만 끓여낸 진한 풍미의 프리미엄 카레 레시피입니다.",
                cookTime: "30분",
                serving: "2인분",
                difficulty: "보통",
                videoId: "Q0KJjfpk6YM", 
                ingredients: [
                    { id: 1, name: "햇 양파 (3kg)", price: 8900, link: "https://link.coupang.com/a/c5CXMg" },
                    { id: 2, name: "세척 당근 (1kg)", price: 4500, link: "https://link.coupang.com/a/c5CYAb" },
                    { id: 3, name: "소고기 국거리용 (300g)", price: 15900, link: "https://link.coupang.com/a/c5CZbA" },
                    { id: 4, name: "고형 카레 (매운맛)", price: 3200, link: "https://link.coupang.com/a/c5CZJz" }
                ]
            };

            const [recipe, setRecipe] = useState(initialData);
            const [isInfoEditing, setIsInfoEditing] = useState(false);
            const [isIngEditing, setIsIngEditing] = useState(false);
            const [selectedItems, setSelectedItems] = useState([]);
            const [isLiked, setIsLiked] = useState(false);
            const [toast, setToast] = useState(null);
            const [showBuyModal, setShowBuyModal] = useState(false);

            useEffect(() => {
                const saved = localStorage.getItem('myRecipeApp_v7'); // v7로 업데이트
                if (saved) {
                    try {
                        setRecipe({ ...initialData, ...JSON.parse(saved) });
                    } catch (e) { console.error(e); }
                }
            }, []);

            useEffect(() => {
                localStorage.setItem('myRecipeApp_v7', JSON.stringify(recipe));
            }, [recipe]);

            useEffect(() => {
                if (!isIngEditing) { 
                   const currentIds = recipe.ingredients.map(i => i.id);
                   setSelectedItems(prev => prev.length === 0 ? currentIds : prev.filter(id => currentIds.includes(id)));
                }
            }, [recipe.ingredients.length]);

            const toggleItem = (id) => {
                setSelectedItems(prev => prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]);
            };

            const toggleAll = () => {
                setSelectedItems(selectedItems.length === recipe.ingredients.length ? [] : recipe.ingredients.map(i => i.id));
            };

            const totalPrice = recipe.ingredients
                .filter(item => selectedItems.includes(item.id))
                .reduce((sum, item) => sum + parseInt(item.price || 0), 0);

            const handleBuyClick = () => {
                if (selectedItems.length === 0) {
                    showToast("선택된 재료가 없습니다.");
                    return;
                }
                setShowBuyModal(true);
            };

            const showToast = (msg) => {
                setToast(msg);
                setTimeout(() => setToast(null), 3000);
            };

            const handleTextChange = (key, value) => {
                setRecipe(prev => ({ ...prev, [key]: value }));
            };

            const handleIngredientChange = (id, field, value) => {
                setRecipe(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.map(item => item.id === id ? { ...item, [field]: value } : item)
                }));
            };

            const addIngredient = () => {
                const newId = Date.now();
                setRecipe(prev => ({
                    ...prev,
                    ingredients: [...prev.ingredients, { id: newId, name: "새 재료 입력", price: 0, link: "" }]
                }));
            };

            const removeIngredient = (id) => {
                if (!confirm("삭제하시겠습니까?")) return;
                setRecipe(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.filter(item => item.id !== id)
                }));
                setSelectedItems(prev => prev.filter(itemId => itemId !== id));
            };

            return (
                <div className="w-full max-w-md bg-white md:my-4 md:rounded-[2rem] shadow-2xl relative min-h-[100vh] flex flex-col mx-auto overflow-hidden">
                    
                    {/* 상단 헤더 */}
                    <header className="absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center text-white bg-gradient-to-b from-black/60 to-transparent pointer-events-none">
                        <div className="pointer-events-auto">
                            <button className="p-2 rounded-full bg-white/20 backdrop-blur-md hover:bg-white/30 transition">
                                <ChevronLeft size={24} />
                            </button>
                        </div>
                        <div className="pointer-events-auto">
                            <button onClick={() => setIsLiked(!isLiked)} className={`p-2 rounded-full backdrop-blur-md transition ${isLiked ? 'bg-red-500 text-white' : 'bg-white/20 text-white hover:bg-white/30'}`}>
                                <Heart size={24} fill={isLiked ? "currentColor" : "none"} />
                            </button>
                        </div>
                    </header>

                    {/* 영상 영역 (75vh로 대폭 확대) */}
                    <div className="relative bg-gray-900 shrink-0 w-full h-[75vh] overflow-hidden">
                        <div className="iframe-wrapper">
                            <iframe 
                                src={`https://www.youtube.com/embed/${recipe.videoId || "Q0KJjfpk6YM"}?autoplay=1&loop=1&playlist=${recipe.videoId || "Q0KJjfpk6YM"}&controls=0&rel=0&playsinline=1&modestbranding=1&iv_load_policy=3`}
                                title="YouTube video player" 
                                frameBorder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                allowFullScreen
                            ></iframe>
                        </div>
                        {/* 하단 그라데이션 */}
                        <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"></div>
                    </div>

                    {/* 컨텐츠 시트 */}
                    <div className="flex-1 bg-white relative -mt-20 rounded-t-[2rem] z-10 flex flex-col pb-12 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] min-h-[50vh]">
                        <div className="w-full flex justify-center pt-3 pb-1">
                            <div className="w-12 h-1.5 bg-gray-200 rounded-full"></div>
                        </div>

                        <div className="px-6 pt-4 pb-8">
                            {/* 레시피 정보 섹션 */}
                            <div className="mb-8">
                                <span className="inline-block px-3 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded-full mb-2">BEST 레시피</span>
                                
                                {isInfoEditing ? (
                                    <div className="space-y-3 animate-fade-in-up border-2 border-amber-100 p-4 rounded-2xl bg-amber-50/30 mt-2">
                                        <h3 className="text-sm font-bold text-amber-700 mb-2 flex items-center gap-1"><Settings size={16} /> 정보 수정</h3>
                                        <div>
                                            <label className="block text-xs font-bold text-gray-500 mb-1">제목</label>
                                            <input type="text" value={recipe.title} onChange={(e) => handleTextChange('title', e.target.value)} className="w-full border border-amber-300 rounded-lg p-2 text-base font-bold outline-none bg-white" />
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-gray-500 mb-1">설명</label>
                                            <textarea value={recipe.description} onChange={(e) => handleTextChange('description', e.target.value)} className="w-full border border-gray-300 rounded-lg p-2 text-sm outline-none h-20 bg-white" />
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-gray-500 mb-1">유튜브 영상 ID</label>
                                            <input type="text" value={recipe.videoId || ""} onChange={(e) => handleTextChange('videoId', e.target.value)} className="w-full border border-gray-300 rounded-lg p-2 text-xs font-mono bg-white" />
                                        </div>
                                        <div className="grid grid-cols-3 gap-2">
                                            <input type="text" value={recipe.cookTime} onChange={(e) => handleTextChange('cookTime', e.target.value)} className="w-full border rounded p-1 text-xs text-center bg-white" placeholder="시간"/>
                                            <input type="text" value={recipe.difficulty} onChange={(e) => handleTextChange('difficulty', e.target.value)} className="w-full border rounded p-1 text-xs text-center bg-white" placeholder="난이도"/>
                                            <input type="text" value={recipe.serving} onChange={(e) => handleTextChange('serving', e.target.value)} className="w-full border rounded p-1 text-xs text-center bg-white" placeholder="인분"/>
                                        </div>
                                        <button onClick={() => setIsInfoEditing(false)} className="w-full bg-amber-500 text-white py-2 rounded-lg font-bold text-sm mt-2 hover:bg-amber-600">저장 완료</button>
                                    </div>
                                ) : (
                                    <div className="animate-fade-in-up">
                                        <h1 className="text-2xl font-bold text-gray-900 mb-2 leading-tight">{recipe.title}</h1>
                                        <p className="text-gray-500 text-sm leading-relaxed mb-4">{recipe.description}</p>
                                        <div className="flex items-center gap-4 text-sm text-gray-500 border-b border-gray-100 pb-4 mb-4">
                                            <div className="flex items-center gap-1.5"><div className="w-2 h-2 rounded-full bg-amber-500"></div>{recipe.cookTime}</div>
                                            <div className="flex items-center gap-1.5"><div className="w-2 h-2 rounded-full bg-amber-500"></div>{recipe.difficulty}</div>
                                            <div className="flex items-center gap-1.5"><div className="w-2 h-2 rounded-full bg-amber-500"></div>{recipe.serving}</div>
                                        </div>
                                        {/* 수정 버튼 하단 배치 */}
                                        <button onClick={() => setIsInfoEditing(true)} className="text-xs text-gray-400 flex items-center gap-1 hover:text-gray-600 underline">
                                            <Edit2 size={12} /> 레시피 정보 수정하기
                                        </button>
                                    </div>
                                )}
                            </div>

                            {/* 재료 섹션 헤더 */}
                            <div className="flex justify-between items-center mb-4 border-t border-gray-50 pt-4">
                                <h2 className="text-lg font-bold flex items-center gap-2">
                                    필요한 재료
                                    <span className="text-amber-500 text-sm font-normal bg-amber-50 px-2 py-0.5 rounded-md">{recipe.ingredients.length}개</span>
                                </h2>
                                
                                <div className="flex items-center gap-2">
                                    {isIngEditing ? (
                                        <button onClick={addIngredient} className="text-xs bg-amber-100 text-amber-700 px-3 py-1.5 rounded-full font-bold flex items-center gap-1 hover:bg-amber-200">
                                            <Plus size={14} /> 추가
                                        </button>
                                    ) : (
                                        <button onClick={toggleAll} className="text-sm text-gray-400 hover:text-gray-600 underline underline-offset-4">
                                            {selectedItems.length === recipe.ingredients.length ? '전체 해제' : '전체 선택'}
                                        </button>
                                    )}
                                    
                                    {/* 재료 수정(관리) 버튼 */}
                                    <button onClick={() => setIsIngEditing(!isIngEditing)} className={`px-3 py-1.5 rounded-lg text-xs font-bold transition flex items-center gap-1 ${isIngEditing ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-500 hover:bg-gray-200'}`}>
                                        {isIngEditing ? "완료" : "관리"}
                                    </button>
                                </div>
                            </div>

                            {/* 재료 리스트 */}
                            <div className="space-y-3">
                                {recipe.ingredients.map((item) => {
                                    const isSelected = selectedItems.includes(item.id);
                                    return (
                                        <div key={item.id} className={`relative group flex flex-col md:flex-row md:items-center gap-3 p-3 rounded-2xl border transition-all duration-200 ${isSelected && !isIngEditing ? 'border-amber-400 bg-amber-50/30' : 'border-gray-100 bg-white'}`}>
                                            <div className="flex items-center gap-3 w-full">
                                                {!isIngEditing && (
                                                    <button onClick={() => toggleItem(item.id)} className={`shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${isSelected ? 'border-amber-500 bg-amber-500' : 'border-gray-300 bg-white'}`}>
                                                        {isSelected && <Check size={14} className="text-white" />}
                                                    </button>
                                                )}
                                                
                                                <div className="flex-1 min-w-0">
                                                    {isIngEditing ? (
                                                        <div className="space-y-2">
                                                            <input type="text" value={item.name} onChange={(e) => handleIngredientChange(item.id, 'name', e.target.value)} className="w-full border border-gray-300 rounded px-2 py-1 text-sm bg-gray-50" placeholder="재료명" />
                                                            {/* 금액 입력란 제거됨 */}
                                                            <input 
                                                                type="text" 
                                                                value={item.link} 
                                                                onChange={(e) => handleIngredientChange(item.id, 'link', e.target.value)} 
                                                                onFocus={() => showToast("보안상 자동 입력이 불가합니다. 직접 입력해주세요.")}
                                                                className="w-full border border-blue-200 rounded px-2 py-1 text-xs text-blue-600 bg-blue-50/30" 
                                                                placeholder="구매 링크 (https://...)" 
                                                            />
                                                        </div>
                                                    ) : (
                                                        <>
                                                            <h3 className={`font-medium truncate ${isSelected ? 'text-gray-900' : 'text-gray-600'}`}>{item.name}</h3>
                                                            <div className="flex items-center gap-2 mt-0.5"><span className="text-sm font-bold text-gray-900">{item.price.toLocaleString()}원</span></div>
                                                        </>
                                                    )}
                                                </div>

                                                <div className="shrink-0 flex flex-col gap-2">
                                                    {isIngEditing ? (
                                                        <button onClick={() => removeIngredient(item.id)} className="p-2 text-red-400 hover:bg-red-50 rounded-full"><Trash2 size={18} /></button>
                                                    ) : (
                                                        <a href={item.link} target="_blank" rel="noreferrer" className="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition"><ExternalLink size={18} /></a>
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            {/* 하단 구매 바 (스크롤을 내려야 보임) */}
                            {!isIngEditing && !isInfoEditing && (
                                <div className="mt-8 w-full">
                                    <div className="w-full bg-gray-900 text-white rounded-2xl p-4 shadow-lg">
                                        <div className="flex items-center justify-between mb-3">
                                            <span className="text-sm text-gray-300">총 <strong className="text-amber-400">{selectedItems.length}</strong>개 선택됨</span>
                                            <div className="text-lg font-bold">{totalPrice.toLocaleString()}원</div>
                                        </div>
                                        <button onClick={handleBuyClick} className="w-full bg-white text-gray-900 font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-gray-100 active:scale-[0.98] transition-all">
                                            <ShoppingCart size={20} />
                                            <span>재료 한 번에 담기</span>
                                        </button>
                                    </div>
                                </div>
                            )}
                            
                        </div>
                    </div>

                    {/* 구매 모달 */}
                    {showBuyModal && (
                        <div className="fixed-modal-overlay animate-fade-in-up" onClick={() => setShowBuyModal(false)}>
                            <div className="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl relative flex flex-col max-h-[80vh]" onClick={(e) => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4 shrink-0">
                                    <h3 className="text-lg font-bold">재료 구매하기</h3>
                                    <button onClick={() => setShowBuyModal(false)} className="p-2 hover:bg-gray-100 rounded-full"><X size={24} /></button>
                                </div>
                                <p className="text-gray-500 text-sm mb-4 shrink-0">
                                    브라우저 정책상 팝업이 차단될 수 있어,<br/>아래 목록을 순서대로 클릭해주세요.
                                </p>
                                <div className="space-y-2 overflow-y-auto no-scrollbar flex-1 min-h-0 border-t border-b border-gray-50 py-2">
                                    {recipe.ingredients.filter(item => selectedItems.includes(item.id)).map((item, idx) => (
                                        <a key={item.id} href={item.link} target="_blank" rel="noreferrer" className="flex items-center justify-between p-3 rounded-xl bg-gray-50 border border-gray-100 hover:bg-amber-50 hover:border-amber-200 transition group" onClick={(e) => e.currentTarget.classList.add('opacity-50')}>
                                            <div className="flex items-center gap-3">
                                                <span className="w-6 h-6 rounded-full bg-gray-900 text-white text-xs flex items-center justify-center font-bold group-hover:bg-amber-500">{idx + 1}</span>
                                                <span className="text-sm font-medium truncate max-w-[160px]">{item.name}</span>
                                            </div>
                                            <ExternalLink size={16} className="text-gray-400 group-hover:text-amber-600" />
                                        </a>
                                    ))}
                                </div>
                                <button onClick={() => setShowBuyModal(false)} className="w-full mt-4 py-3 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 shrink-0">닫기</button>
                            </div>
                        </div>
                    )}

                    {toast && (
                        <div className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-900/90 text-white px-6 py-3 rounded-full text-sm backdrop-blur-sm animate-fade-in-up z-[9999] whitespace-nowrap shadow-xl flex items-center gap-2 pointer-events-none">
                            <Info size={16} className="text-amber-400" />
                            {toast}
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
